# ğŸ›ï¸ æ¶æ„è®¾è®¡æ–‡æ¡£

## ğŸ“ å…­è¾¹å½¢æ¶æ„å›¾ç¤º

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å¤–éƒ¨ä¸–ç•Œ (External)                        â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   HTTP Client â”‚    â”‚  Inventory   â”‚    â”‚   Message    â”‚      â”‚
â”‚  â”‚   (Browser)   â”‚    â”‚   Service    â”‚    â”‚    Queue     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                   â”‚                    â”‚
           â”‚                   â”‚                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      é€‚é…å™¨å±‚ (Adapters)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  å…¥ç«™é€‚é…å™¨ (Inbound)    â”‚   å‡ºç«™é€‚é…å™¨ (Outbound)           â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ OrderControllerâ”‚â—„â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”‚ StockAvailabilityChecker â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                â”‚      â”‚   â”‚   (Dummy)                â”‚  â”‚ â”‚
â”‚  â”‚  â”‚   + place()    â”‚      â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚  â”‚   + health()   â”‚      â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   â”‚   OrderRepository        â”‚  â”‚ â”‚
â”‚  â”‚           â”‚              â”‚   â”‚   (InMemory)             â”‚  â”‚ â”‚
â”‚  â”‚           â”‚              â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚           â”‚              â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚           â”‚              â”‚   â”‚ OrderPlacedNotifier      â”‚  â”‚ â”‚
â”‚  â”‚           â”‚              â”‚   â”‚   (Logging)              â”‚  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”      â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚  â”‚   OrderMapper  â”‚      â”‚                                  â”‚ â”‚
â”‚  â”‚  â”‚  (DTO â†” Domain)â”‚      â”‚                                  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚                                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ ç«¯å£ (Ports)
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       æ ¸å¿ƒå±‚ (Core)                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                   Port å±‚ (æ¥å£å®šä¹‰)                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  PlaceOrderUseCaseâ”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚StockAvailabilityCheckerâ”‚  â”‚ â”‚
â”‚  â”‚  â”‚   (In Port)       â”‚          â”‚    (Out Port)          â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚            â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚            â”‚                    â”‚   OrderRepository      â”‚  â”‚ â”‚
â”‚  â”‚            â”‚                    â”‚    (Out Port)          â”‚  â”‚ â”‚
â”‚  â”‚            â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚            â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚            â”‚                    â”‚ OrderPlacedNotifier    â”‚  â”‚ â”‚
â”‚  â”‚            â”‚                    â”‚    (Out Port)          â”‚  â”‚ â”‚
â”‚  â”‚            â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚               â”‚                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                 Application å±‚ (ç”¨ä¾‹å®ç°)                      â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚  â”‚  â”‚PlaceOrderHandler â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ PlaceOrderService      â”‚    â”‚ â”‚
â”‚  â”‚  â”‚  implements      â”‚         â”‚  (Business Logic)      â”‚    â”‚ â”‚
â”‚  â”‚  â”‚PlaceOrderUseCase â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚               â”‚                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    Domain å±‚ (é¢†åŸŸæ¨¡å‹)                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚ â”‚
â”‚  â”‚  â”‚  Order   â”‚  â”‚ OrderItem â”‚  â”‚ Money â”‚  â”‚  OrderId  â”‚     â”‚ â”‚
â”‚  â”‚  â”‚(Aggregate)â”‚  â”‚  (Value)  â”‚  â”‚(Value)â”‚  â”‚  (Value)  â”‚     â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚  ç‰¹æ€§:                                                        â”‚ â”‚
â”‚  â”‚  âœ“ ç§æœ‰æ„é€ å‡½æ•° + å·¥å‚æ–¹æ³•                                    â”‚ â”‚
â”‚  â”‚  âœ“ å¼ºä¸å˜å¼éªŒè¯                                              â”‚ â”‚
â”‚  â”‚  âœ“ æ— æ¡†æ¶ä¾èµ–                                                â”‚ â”‚
â”‚  â”‚  âœ“ çº¯ä¸šåŠ¡é€»è¾‘                                                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ æ•°æ®æµç¤ºä¾‹ï¼ˆä¸‹å•æµç¨‹ï¼‰

```
1. HTTP Request â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   POST /orders                                              â”‚
   {                                                         â”‚
     "items": [{"sku": "A", "unitPrice": 10, "quantity": 2}]â”‚
   }                                                         â”‚
                                                             â”‚
2. OrderController (Adapter) â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â”œâ”€â–º OrderMapper.toCommand(request)
   â”‚   â””â”€â–º PlaceOrderCommand(items=[OrderItem(...)])
   â”‚
3. PlaceOrderHandler (Application) â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  execute(command)                                       â”‚
   â”‚                                                         â”‚
4. PlaceOrderService (Application) â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â”œâ”€â–º StockAvailabilityChecker.checkAndReserve(sku, qty)
   â”‚   â””â”€â–º return true  (åº“å­˜å……è¶³)
   â”‚
   â”œâ”€â–º Order.create(items)  (Domain éªŒè¯)
   â”‚   â””â”€â–º return Order(id, items)
   â”‚
   â”œâ”€â–º OrderRepository.save(order)
   â”‚   â””â”€â–º ä¿å­˜åˆ°å†…å­˜
   â”‚
   â”œâ”€â–º OrderPlacedNotifier.notify(order)
   â”‚   â””â”€â–º è®°å½•æ—¥å¿—
   â”‚
   â””â”€â–º return Result.success(orderId)
   
5. OrderController â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  result.fold(...)                                       â”‚
   â”‚                                                         â”‚
6. HTTP Response â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   201 Created
   {
     "orderId": "550e8400-e29b-41d4-a716-446655440000"
   }
```

## ğŸ¯ ä¾èµ–è§„åˆ™

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¤–å±‚ä¾èµ–å†…å±‚ï¼Œå†…å±‚ä¸çŸ¥é“å¤–å±‚å­˜åœ¨         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Adapter â”€â”€â”€â”€â”€â”€â–º Port â”€â”€â”€â”€â”€â”€â–º Application â”€â”€â”€â”€â”€â”€â–º Domain
  (é€‚é…å™¨)      (æ¥å£)       (ç”¨ä¾‹)             (é¢†åŸŸ)

âœ“ Adapter ä¾èµ– Port å’Œ Domainï¼ˆä½†ä¸ä¾èµ–Applicationï¼‰
âœ“ Application ä¾èµ– Port å’Œ Domain
âœ“ Port ä¾èµ– Domain
âœ“ Domain ä¸ä¾èµ–ä»»ä½•å±‚
âœ— Domain ä¸èƒ½ä¾èµ– Application/Port/Adapter
âœ— Application ä¸èƒ½ä¾èµ– Adapter
âœ— Adapter ä¸èƒ½ç›´æ¥ä¾èµ– Applicationï¼ˆåªèƒ½é€šè¿‡Portæ¥å£ï¼‰
```

## ğŸ§© å„å±‚èŒè´£è¯¦è§£

### Domain å±‚ (æ ¸å¿ƒåŸŸ)
**è´£ä»»**: å°è£…ä¸šåŠ¡è§„åˆ™å’Œä¸å˜å¼

**ç‰¹æ€§**:
- æ— æ¡†æ¶ä¾èµ–
- ç§æœ‰æ„é€ å‡½æ•° + å·¥å‚æ–¹æ³•
- å¼ºä¸å˜å¼éªŒè¯
- çº¯ Kotlin ä»£ç 

**ç¤ºä¾‹**:
```kotlin
// âŒ ä¸å¥½çš„åšæ³•
data class Order(val id: String, val items: List<OrderItem>, val total: BigDecimal)

// âœ… å¥½çš„åšæ³•
class Order private constructor(val id: OrderId, val items: List<OrderItem>) {
    init {
        require(items.isNotEmpty()) { "Order must contain at least one item" }
    }
    fun total(): Money = items.fold(Money.ZERO) { acc, item -> acc + item.subtotal() }
    companion object {
        fun create(items: List<OrderItem>): Order = Order(OrderId.generate(), items)
    }
}
```

### Port å±‚ (ç«¯å£æ¥å£)
**è´£ä»»**: å®šä¹‰æ ¸å¿ƒåŸŸä¸å¤–éƒ¨çš„äº¤äº’å¥‘çº¦

**å…¥ç«™ç«¯å£ (In Port)**:
- å®šä¹‰åº”ç”¨ç”¨ä¾‹æ¥å£
- é¢å‘ä¸šåŠ¡è¯­ä¹‰å‘½å
- è¿”å› Result ç±»å‹

**å‡ºç«™ç«¯å£ (Out Port)**:
- å®šä¹‰å¤–éƒ¨ä¾èµ–æ¥å£
- ä¸šåŠ¡è¯­ä¹‰åŒ–å‘½å (éæŠ€æœ¯åŒ–)
- å•ä¸€èŒè´£åŸåˆ™

**å‘½åå¯¹æ¯”**:
```kotlin
// âŒ æŠ€æœ¯åŒ–å‘½å
interface InventoryGateway
interface OrderEventPublisher

// âœ… ä¸šåŠ¡è¯­ä¹‰åŒ–å‘½å
interface StockAvailabilityChecker
interface OrderPlacedNotifier
```

### Application å±‚ (åº”ç”¨æœåŠ¡)
**è´£ä»»**: ç¼–æ’ä¸šåŠ¡æµç¨‹ï¼Œåè°ƒé¢†åŸŸå¯¹è±¡å’Œå¤–éƒ¨ä¾èµ–

**Handler**:
- å®ç°å…¥ç«™ç«¯å£
- ç”¨ä¾‹å…¥å£ç‚¹
- è–„å±‚ï¼Œä»…è½¬å‘

**Service**:
- ä¸šåŠ¡é€»è¾‘ç¼–æ’
- è°ƒç”¨é¢†åŸŸå¯¹è±¡
- è°ƒç”¨å‡ºç«™ç«¯å£
- è¿”å› Result ç±»å‹

**é”™è¯¯å¤„ç†**:
```kotlin
// âŒ ä¸å¥½çš„åšæ³• (æŠ›å¼‚å¸¸)
fun placeOrder(items: List<OrderItem>): Order {
    if (!stockChecker.check()) throw InsufficientStockException()
    return order
}

// âœ… å¥½çš„åšæ³• (è¿”å› Result with OrderError)
fun placeOrder(items: List<OrderItem>): Result<OrderId> {
    if (!stockChecker.check()) return Result.failure(OrderError.InsufficientStock())
    return Result.success(order.id)
}
```

**é¢†åŸŸé”™è¯¯ç±»å‹**:
```kotlin
// Domainå±‚å®šä¹‰é”™è¯¯ç±»å‹
sealed interface OrderError {
    val message: String
    val code: String
    
    data class InsufficientStock(...) : OrderError
    data class InvalidOrder(...) : OrderError
}
```

### Adapter å±‚ (é€‚é…å™¨)
**è´£ä»»**: è¿æ¥å¤–éƒ¨æŠ€æœ¯ä¸æ ¸å¿ƒåŸŸ

**å…¥ç«™é€‚é…å™¨**:
- HTTP Controller
- æ¶ˆæ¯é˜Ÿåˆ—ç›‘å¬å™¨
- å®šæ—¶ä»»åŠ¡

**å‡ºç«™é€‚é…å™¨**:
- æ•°æ®åº“å®ç°
- å¤–éƒ¨æœåŠ¡è°ƒç”¨
- æ¶ˆæ¯å‘å¸ƒ

**Mapper**:
- DTO â†” Domain è½¬æ¢
- ä¿æŒå±‚æ¬¡è§£è€¦

**é‡è¦**:
- Adapter **åªä¾èµ–** Portï¼ˆæ¥å£ï¼‰å’Œ Domainï¼ˆé”™è¯¯ç±»å‹ç­‰ï¼‰
- Adapter **ä¸åº”è¯¥** ç›´æ¥ä¾èµ– Application å±‚çš„å…·ä½“å®ç°
- è¿™ä¿è¯äº†æ¶æ„çš„ä¾èµ–å€’ç½®åŸåˆ™

## ğŸ“Š æµ‹è¯•ç­–ç•¥

### 1. Domain æµ‹è¯• (å•å…ƒæµ‹è¯•)
```kotlin
class OrderDomainTest : StringSpec({
    "should not allow empty items" {
        shouldThrow<IllegalArgumentException> {
            Order.create(emptyList())
        }
    }
})
```

### 2. Application æµ‹è¯• (é›†æˆæµ‹è¯•)
```kotlin
class PlaceOrderServiceTest : StringSpec({
    val repository = FakeOrderRepository()
    val stockChecker = FakeStockAvailabilityChecker(available = true)
    val notifier = FakeOrderPlacedNotifier()
    val service = PlaceOrderService(repository, stockChecker, notifier)
    
    "should place order successfully" {
        val result = service.placeOrder(items)
        result.isSuccess shouldBe true
    }
})
```

### 3. E2E æµ‹è¯• (ç«¯åˆ°ç«¯)
```kotlin
@MicronautTest
class OrderE2ETest(@Client("/") private val client: HttpClient) : StringSpec({
    "should place order via HTTP" {
        val response = client.toBlocking().exchange(...)
        response.status shouldBe HttpStatus.CREATED
    }
})
```

## ğŸ”Œ æ‰©å±•ç‚¹

### æ·»åŠ æ–°ç”¨ä¾‹
1. å®šä¹‰ Port (`core/port/in/`)
2. å®ç° Handler (`core/application/handler/`)
3. å®ç° Service (`core/application/service/`)
4. æ·»åŠ  Adapter (`adapter/in/http/`)

### æ›¿æ¢å®ç°
åªéœ€åˆ›å»ºæ–°çš„ Adapter å®ç°å³å¯ï¼Œæ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç ï¼š

```kotlin
@Singleton
@Replaces(InMemoryOrderRepository::class)
class PostgresOrderRepository : OrderRepository {
    // ä½¿ç”¨ JPA/R2DBC å®ç°
}
```

## ğŸ“ è®¾è®¡åŸåˆ™

1. **ä¾èµ–å€’ç½®åŸåˆ™ (DIP)**: é«˜å±‚æ¨¡å—ä¸ä¾èµ–ä½å±‚æ¨¡å—
2. **æ¥å£éš”ç¦»åŸåˆ™ (ISP)**: æ¥å£å°è€Œä¸“æ³¨
3. **å•ä¸€èŒè´£åŸåˆ™ (SRP)**: æ¯ä¸ªç±»åªæœ‰ä¸€ä¸ªå˜åŒ–çš„ç†ç”±
4. **å¼€é—­åŸåˆ™ (OCP)**: å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­
5. **é‡Œæ°æ›¿æ¢åŸåˆ™ (LSP)**: å­ç±»å¯ä»¥æ›¿æ¢çˆ¶ç±»

## ğŸ“š å‚è€ƒèµ„æ–™

- [Hexagonal Architecture](https://alistair.cockburn.us/hexagonal-architecture/)
- [Clean Architecture](https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html)
- [DDD (Domain-Driven Design)](https://www.domainlanguage.com/ddd/)
- [Ports and Adapters Pattern](https://jmgarridopaz.github.io/content/hexagonalarchitecture.html)

---

**æ­¤æ¶æ„ç¡®ä¿äº†é«˜å†…èšã€ä½è€¦åˆã€å¯æµ‹è¯•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚** ğŸš€

